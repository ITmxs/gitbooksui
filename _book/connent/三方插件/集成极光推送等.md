> æœ¬æ–‡æ˜¯æ ¹æ®æå…‰å®˜ç½‘çš„æ–‡æ¡£æ“ä½œåæ€»ç»“å‡º:(å†™çš„ä¸å°½è¯¦ç»†æ”¯å‡ºå¯ä»¥å…ˆçœ‹ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œä»¥ä¾¿ç†è§£ğŸ˜)

> #### é¦–å…ˆç®€å•çš„é›†æˆæå…‰æ¨é€
>
> ã€æå…‰å¹³å°åˆ›å»ºé¡¹ç›®ï¼ŒAndroid/IOSï¼Œå…·ä½“é…ç½® p12è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œç½‘ä¸Šä¸€å †
>  ã€pubspec.yaml -> å¼•å…¥æå…‰æ’ä»¶ jpush_flutter: ^0.6.3
>  ã€å…¬å…±å¤„mainä¸­  åˆå§‹åŒ– åˆ›å»ºå›è°ƒ å…·ä½“ å¦‚ä¸‹ï¼š



```dart
void initState() {
super.initState();
///æå…‰æ¨é€
this.initJpush();
}
initJpush() async {
JPush jpush = new JPush();
jpush.applyPushAuthority(
    new NotificationSettingsIOS(sound: true, alert: true, badge: true));
//è·å–æ³¨å†Œçš„id
jpush.getRegistrationID().then((rid) {
 //è¿™é‡Œè¯´ä¸€ä¸‹ è‹¥åˆ«å¤„éœ€è¦ä½¿ç”¨rid å¦‚æ­¤è°ƒç”¨   await jpush.getRegistrationID()
  print("è·å–æ³¨å†Œçš„id:$rid");
});
//åˆå§‹åŒ–
jpush.setup(
  appKey: "è¿™é‡Œæ˜¯æå…‰å¹³å°çš„appKey",
  channel: "thisChannel",
  production: false,
  debug: true, // è®¾ç½®æ˜¯å¦æ‰“å° debug æ—¥å¿—
);

//è®¾ç½®åˆ«å  å®ç°æŒ‡å®šç”¨æˆ·æ¨é€
jpush.setAlias("supperman").then((map) {
  print("è®¾ç½®åˆ«åæˆåŠŸ");
});

try {
  //ç›‘å¬æ¶ˆæ¯é€šçŸ¥
  jpush.addEventHandler(
    // æ¥æ”¶é€šçŸ¥å›è°ƒæ–¹æ³•ã€‚
    onReceiveNotification: (Map<String, dynamic> message) async {
      print("flutter onReceiveNotification: $message");
    },
    // ç‚¹å‡»é€šçŸ¥å›è°ƒæ–¹æ³•ã€‚
    onOpenNotification: (Map<String, dynamic> message) async {
      print("flutter onOpenNotification: $message");
    },
    // æ¥æ”¶è‡ªå®šä¹‰æ¶ˆæ¯å›è°ƒæ–¹æ³•ã€‚
    onReceiveMessage: (Map<String, dynamic> message) async {
      print("flutter onReceiveMessage: $message");
    },
  );
} catch (e) {
  print('æå…‰sdké…ç½®å¼‚å¸¸');
}
}
```

> ã€Android éœ€è¦åœ¨app->build.gradle->android{...->defaultConfig {.. æ­¤å¤„æ·»åŠ é…ç½®å¦‚ä¸‹



```cpp
manifestPlaceholders = [
      JPUSH_PKGNAME : applicationId,
      JPUSH_APPKEY : "xxxxxx", // NOTE: JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.
      JPUSH_CHANNEL : "thisPush", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯
]
```

> è‡³æ­¤appåœ¨çº¿è°ƒè¯•OK

> å› ä¸ºéœ€æ±‚ä¸ä¼šåªè¦appåœ¨çº¿çŠ¶æ€ä¸‹æ”¶åˆ°æ¨é€ï¼Œè‹¹æœæœ¬å°±å¯ä»¥æ‰€ä»¥éœ€è¦å¤„ç†å®‰å“å¦‚ä½•æ¥æ”¶ç¦»çº¿æ¨é€æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹ç€æ‰‹å¤„ç†æ¥æ”¶ç¦»çº¿æ¨é€

> é¦–å…ˆå»å°ç±³ã€vivoã€é­…æ—ã€oppoã€åä¸ºã€ç­‰æ‰‹æœºå‚å•†çš„å¼€å‘è€…ä¸­å¿ƒå»æ³¨å†Œåˆ›å»ºé¡¹ç›®ï¼Œæ³¨æ„åˆ›å»ºé¡¹ç›®æ—¶åŒ…åè¦ä¸æœ¬åœ°é¡¹ç›®çš„åŒ…åç›¸åŒğŸ˜„
>  ç„¶åå†æå…‰å¹³å°é›†æˆè®¾ç½®ä¸­å¡«å†™

> ç„¶åå»çœ‹çœ‹å‚å•†é›†æˆæ–‡æ¡£ï¼Œæ²¡åšè¿‡å®‰å“æ˜¯ä¸æ˜¯ä¸€å¤´é›¾æ°´ï¼Œæ²¡äº‹å„¿è€å¿ƒçœ‹å®Œæ¥ä¸‹æ¥æˆ‘ä»¬æŠŠé‚£äº›ç®€åŒ–ä¸€ä¸‹æ€»ç»“åå°±æ˜¯åˆ†ä¸ºä¸¤ç§

> ä¸€ã€å°ç±³/vivo/é­…æ—/oppo



```cpp
manifestPlaceholders = [
      JPUSH_PKGNAME : applicationId,
      JPUSH_APPKEY : "xxxxxx", // NOTE: JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.
      JPUSH_CHANNEL : "thisPush", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯.

      XIAOMI_APPID  : "MI-xxxxxxx",
      XIAOMI_APPKEY : "MI-xxxxxx",

      OPPO_APPKEY : "OP-xxxxxxxx", // OPPOå¹³å°æ³¨å†Œçš„appkey
      OPPO_APPID : "OP-xxxxxx", // OPPOå¹³å°æ³¨å†Œçš„appid
      OPPO_APPSECRET: "OP-xxxxxx",//OPPOå¹³å°æ³¨å†Œçš„appsecret

      VIVO_APPKEY : "xxxxxxx", // VIVOå¹³å°æ³¨å†Œçš„appkey
      VIVO_APPID : "xxxxxx", // VIVOå¹³å°æ³¨å†Œçš„appid 

      MEIZU_APPKEY : "MZ-xxxxx", // é­…æ—å¹³å°æ³¨å†Œçš„appkey
      MEIZU_APPID : "MZ-xxxxxx", // é­…æ—å¹³å°æ³¨å†Œçš„appid
    ]     
```

> 



```dart
dependencies {
implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
compile 'com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+'
compile 'cn.jiguang.sdk.plugin:xiaomi:3.9.0'//ç‰ˆæœ¬å·å’Œå¯¹åº”çš„JPushç‰ˆæœ¬å·ç›¸åŒ
compile 'cn.jiguang.sdk.plugin:oppo:3.9.0'//ç‰ˆæœ¬å·å’Œå¯¹åº”çš„JPushç‰ˆæœ¬å·ç›¸åŒ
compile 'cn.jiguang.sdk.plugin:vivo:3.9.0'//ç‰ˆæœ¬å·å’Œå¯¹åº”çš„JPushç‰ˆæœ¬å·ç›¸åŒ
compile 'cn.jiguang.sdk.plugin:meizu:3.9.0'//ç‰ˆæœ¬å·å’Œå¯¹åº”çš„JPushç‰ˆæœ¬å·ç›¸åŒ
}
```

> äºŒã€åä¸º(æ€»æ˜¯geè·¯å­)
>  ã€åˆ›å»ºå®Œé¡¹ç›®åå°†agconnect-services.jsonæ–‡ä»¶æ‹–å…¥android->appä¸‹ï¼Œç„¶åå°†æœ¬åœ°ç­¾åæ–‡ä»¶ä¸­çš„SHA256ä»£ç å¡«å…¥åä¸ºåå°ï¼ˆå¡«å†™å®Œä¸€å®šè¦ç‚¹å‡»å³ä¾§çš„âœ…ï¼‰
>
> ![img](https:////upload-images.jianshu.io/upload_images/22818555-9eecc7d7a9ac01e1.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp)
>
> image.png
>
> ã€ä¸éœ€è¦åœ¨ä»£ç ä¸­å¡«å†™appkey,å…·ä½“æ“ä½œå¦‚ä¸‹



```dart
//app->build.gradle
dependencies {
implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
implementation 'com.huawei.hms:push:5.1.1.301'
implementation 'cn.jiguang.sdk.plugin:huawei:3.9.0'
compile 'com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+'
compile 'cn.jiguang.sdk.plugin:xiaomi:3.9.0'//ç‰ˆæœ¬å·å’Œå¯¹åº”çš„JPushç‰ˆæœ¬å·ç›¸åŒ
compile 'cn.jiguang.sdk.plugin:oppo:3.9.0'
compile 'cn.jiguang.sdk.plugin:vivo:3.9.0'
compile 'cn.jiguang.sdk.plugin:meizu:3.9.0'
}
apply plugin: 'com.huawei.agconnect' //æ­¤å¤„ç”¨ä»¥è°ƒç”¨agconnectåŠ¨æ€çŠ¶æ€ç®¡ç†å™¨
```

> 



```dart
//android->build.gradle
buildscript {
ext.kotlin_version = '1.4.10'//'1.3.50'
repositories {
      google()
      jcenter()
    maven {url 'http://developer.huawei.com/repo/'}
}

dependencies {
    classpath 'com.android.tools.build:gradle'
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    classpath 'com.android.tools.build:gradle:3.3.2'
    classpath 'com.huawei.agconnect:agcp:1.2.1.301'
    
}
}

allprojects {
repositories {
      google()
      jcenter()
    maven {url 'http://developer.huawei.com/repo/'}
}
}
```

> 



```go
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"////æ·»åŠ æ­¤å¤„ä»£ç 
package="xxxxxx">
<application
    tools:replace="android:label" ////æ·»åŠ æ­¤å¤„ä»£ç 
    android:usesCleartextTraffic="true"
    ......
```

> ### ä¸‡äº‹éƒ½æœ‰æ„å¤–çŠ¶å†µï¼Œå¦‚æœä½ çš„é¡¹ç›®ä¸­æœ‰é›†æˆç¯ä¿¡é€šè®¯ï¼Œä»”ç»†çš„ä½ ä¼šå‘ç°æ¨é€ä¸å¥½ç”¨äº†ï¼Œè°ƒè¯•æ—¶ä¼šå‘ç°è·å–ä¸åˆ°Devicetokenï¼Œä¸è¦æ…Œï¼Œè¿™æ˜¯å› ä¸ºç¯ä¿¡å¯¹iOSåŸç”Ÿä»£ç†é‡å†™äº†å¯¼è‡´Devicetokenè·å–è¢«ç¯ä¿¡æ‹¦æˆªäº†ï¼Œè§£å†³åŠæ³•å°±æ˜¯ï¼Œå…ˆæ³¨å†Œç¯ä¿¡ç™»å½•ï¼Œå°±å¥½äº†ï¼ŒåŸç†å°±æ˜¯å…ˆè®©ç¯ä¿¡å»è·å–DevicetokenğŸ˜ç›®å‰ä½œè€…ä¹Ÿæ²¡ä»€ä¹ˆæ›´å¥½çš„åŠæ³•ï¼Œæœ‰æ›´çš„è§£å†³æ–¹å¼æ¬¢è¿ç•™è¨€ï¼Œè°¢è°¢ç‚¹èµæ”¯æŒï¼ï¼ï¼ï¼



